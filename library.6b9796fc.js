function t(t,n){t.innerHTML=function(t){return t.map(((t,n)=>function({poster_path:t,genre_ids:n,title:a,release_date:s,vote_average:l},r){return`\n    <li class="gallery__item" data-movie="${r}">\n        <a class="gallery__link">\n            <div class="img__wrap">\n                <img class="gallery__img" src="https://image.tmdb.org/t/p/w500${t}">\n            </div>\n            <p class="gallery__info">\n                <span class="gallery__info--title">${a}</span>\n                <span class="galery__info--text">${function(t){const n=t.map(e);if(!n)return"";return n.length<=3?n.join(", "):[...n.slice(0,2),"other..."].join(", ")}(n)} | ${s?s.slice(0,4):""}</span>\n                <span class="gallery__info--vote">${l.toFixed(1)}</span>\n            </p>\n        </a>\n    </li>\n    `}(t,n))).join("")}(n)}function e(t){return JSON.parse(localStorage.getItem("genres")).find((e=>e.id===t)).name}function n(t,e,n){const a=`\n            <button type="button" class="pg-btn btn-left" data-page="prev"></button>\n            <button type="button" class="num-btn" data-page="first">1</button>\n            <span class="num-btn">...</span>    \n            ${function(t,e){let n=1,a=e,s="";e>5&&(t<3?a=5:t>e-3?(n=e-5+1,a=e):(n=t-2,a=t+2));for(let e=n;e<=a;e++)s+=`\n        <span\n            class="${e!==t?"num-btn":"pg-btn pg-btn--cur"}"\n            data-page="${e}">${e}</span>\n        `;return s}(e,n)}\n            <span class="num-btn">...</span>    \n            <button type="button" class="num-btn" data-page="last">${n}</button>\n            <button type="button" class="pg-btn btn-right" data-page="next">\n                <svg class="pg-btn-arrow">\n                    <use class="pg-btn-icon" href="./images/sprite.svg#icon-arrow-right"></use>\n                </svg>\n            </button>\n        `;t.innerHTML=a}function a(t,e,n){switch(e){case"first":return 1;case"last":return n;case"prev":return 1===t?1:t-1;case"next":return t===n?n:t+1;default:return+e}}const s=document.querySelector("#queue"),l=document.querySelector("#watched"),r=document.querySelector(".header__buttons"),o=document.querySelector(".gallery"),c=document.querySelector("#pages"),i={watched:"watchedAll",queue:"queueAll"},u="watched",g="queue";function p(e,a){const s=JSON.parse(localStorage.getItem(i[e]));if(s){const l={page:a,total_pages:s.total_pages,total_results:s.total_results,results:s.results.slice(20*(a-1),20*a),rules:e};localStorage.setItem("localMovies",JSON.stringify(l)),t(o,l.results),n(c,a,l.total_pages),c.addEventListener("click",m),o.addEventListener("click",b)}else o.innerHTML="<h1>EMPTY gallery</h1>",c.innerHTML="";window.scrollTo(0,0),r.addEventListener("click",d)}function d(t){r.removeEventListener("click",d),"watched"===t.target.id?(l.classList.add("btn--is-active"),s.classList.remove("btn--is-active"),p(u,1)):(l.classList.remove("btn--is-active"),s.classList.add("btn--is-active"),p(g,1))}function b(t){const e=t.target.closest(".gallery__item");console.log(`%c${e.dataset.movie}`,"color: yellow; background-color: red; display: inline-block; padding: 5px; font-weight: bold;")}function m(t){c.removeEventListener("click",m);const e=t.target.dataset.page;if(!e)return;const n=JSON.parse(localStorage.getItem("localMovies")),s=a(n.page,e,n.total_pages);p(n.rules,s)}p(u,1);
//# sourceMappingURL=library.6b9796fc.js.map
